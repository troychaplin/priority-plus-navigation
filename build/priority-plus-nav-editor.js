(()=>{"use strict";const o=window.wp.i18n,e=window.wp.blocks,r=window.wp.primitives,i=window.ReactJSXRuntime;var t=(0,i.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(r.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M7.404 16.596a6.5 6.5 0 1 0 9.192-9.192 6.5 6.5 0 0 0-9.192 9.192ZM6.344 6.343a8 8 0 1 0 11.313 11.314A8 8 0 0 0 6.343 6.343Zm4.906 9.407v-3h-3v-1.5h3v-3h1.5v3h3v1.5h-3v3h-1.5Z"})});const a=window.wp.hooks;(0,e.registerBlockVariation)("core/navigation",{name:"priority-plus-navigation",title:(0,o.__)("Priority Plus Navigation","priority-plus-navigation"),description:(0,o.__)('A responsive navigation that automatically moves overflow items to a "More" dropdown.',"priority-plus-navigation"),icon:t,scope:["inserter","transform"],attributes:{className:"is-style-priority-plus-navigation",overlayMenu:"never",priorityNavEnabled:!0,priorityNavMoreLabel:"More",priorityNavMoreBackgroundColor:void 0,priorityNavMoreBackgroundColorHover:void 0,priorityNavMoreTextColor:void 0,priorityNavMoreTextColorHover:void 0},isActive:(o,e)=>o.className?.includes(e.className)}),(0,a.addFilter)("blocks.registerBlockType","priority-plus-navigation/extend-core-navigation",(o,e)=>"core/navigation"!==e?o:{...o,attributes:{...o.attributes,priorityNavEnabled:{type:"boolean",default:!1},priorityNavMoreLabel:{type:"string",default:"More"},priorityNavMoreIcon:{type:"string",default:"none"},priorityNavMoreBackgroundColor:{type:"string"},priorityNavMoreBackgroundColorHover:{type:"string"},priorityNavMoreTextColor:{type:"string"},priorityNavMoreTextColorHover:{type:"string"},priorityNavMorePadding:{type:"object",default:void 0},dropdownStyles:{type:"object",default:{backgroundColor:"#ffffff",borderColor:"#dddddd",borderWidth:"1px",borderRadius:"4px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",itemSpacing:"0.75rem 1.25rem",itemHoverBackgroundColor:"rgba(0, 0, 0, 0.05)",itemHoverTextColor:"inherit",multiLevelIndent:"1.25rem"}}}});const l=window.wp.blockEditor,n=window.wp.components,s=window.wp.compose,p=window.wp.element,d={backgroundColor:"#ffffff",borderColor:"#dddddd",borderWidth:"1px",borderRadius:"4px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",itemSpacing:"0.75rem 1.25rem",itemHoverBackgroundColor:"rgba(0, 0, 0, 0.05)",itemHoverTextColor:"inherit",multiLevelIndent:"1.25rem"},u=({dropdownStyles:e,onClose:r,onSave:t})=>{const[a,s]=(0,p.useState)(()=>({...d,...e||{}})),u=(o,e)=>{s(r=>({...r,[o]:e}))};return(0,i.jsx)(n.Modal,{title:(0,o.__)("Customize Dropdown Styles","priority-plus-navigation"),onRequestClose:r,className:"priority-plus-dropdown-customizer-modal",style:{maxWidth:"1200px"},children:(0,i.jsxs)("div",{className:"priority-plus-dropdown-customizer-modal__wrapper",children:[(0,i.jsxs)("div",{className:"priority-plus-dropdown-customizer-modal__content",children:[(0,i.jsx)("div",{className:"priority-plus-dropdown-customizer-modal__column priority-plus-dropdown-customizer-modal__column--controls",children:(0,i.jsxs)(n.Panel,{children:[(0,i.jsx)(l.PanelColorSettings,{title:(0,o.__)("Colors","priority-plus-navigation"),colorSettings:[{label:(0,o.__)("Background Color","priority-plus-navigation"),value:a.backgroundColor,onChange:o=>u("backgroundColor",o||d.backgroundColor),clearable:!0},{label:(0,o.__)("Border Color","priority-plus-navigation"),value:a.borderColor,onChange:o=>u("borderColor",o||d.borderColor),clearable:!0},{label:(0,o.__)("Item Hover Background","priority-plus-navigation"),value:a.itemHoverBackgroundColor,onChange:o=>u("itemHoverBackgroundColor",o||d.itemHoverBackgroundColor),clearable:!0},{label:(0,o.__)("Item Hover Text Color","priority-plus-navigation"),value:a.itemHoverTextColor,onChange:o=>u("itemHoverTextColor",o||d.itemHoverTextColor),clearable:!0}]}),(0,i.jsxs)(n.PanelBody,{title:(0,o.__)("Border & Shadow","priority-plus-navigation"),initialOpen:!0,children:[(0,i.jsx)(n.PanelRow,{children:(0,i.jsx)(n.__experimentalUnitControl,{label:(0,o.__)("Border Width","priority-plus-navigation"),value:a.borderWidth,onChange:o=>u("borderWidth",o||d.borderWidth),units:[{value:"px",label:"px"},{value:"em",label:"em"},{value:"rem",label:"rem"}]})}),(0,i.jsx)(n.PanelRow,{children:(0,i.jsx)(n.__experimentalUnitControl,{label:(0,o.__)("Border Radius","priority-plus-navigation"),value:a.borderRadius,onChange:o=>u("borderRadius",o||d.borderRadius),units:[{value:"px",label:"px"},{value:"em",label:"em"},{value:"rem",label:"rem"},{value:"%",label:"%"}]})}),(0,i.jsx)(n.PanelRow,{children:(0,i.jsx)(n.TextControl,{label:(0,o.__)("Box Shadow","priority-plus-navigation"),value:a.boxShadow,onChange:o=>u("boxShadow",o||d.boxShadow),help:(0,o.__)("CSS box-shadow value","priority-plus-navigation")})})]}),(0,i.jsxs)(n.PanelBody,{title:(0,o.__)("Spacing","priority-plus-navigation"),initialOpen:!0,children:[(0,i.jsx)(n.PanelRow,{children:(0,i.jsx)(n.TextControl,{label:(0,o.__)("Item Padding","priority-plus-navigation"),value:a.itemSpacing,onChange:o=>u("itemSpacing",o||d.itemSpacing),help:(0,o.__)('CSS padding (e.g., "0.75rem 1.25rem")',"priority-plus-navigation")})}),(0,i.jsx)(n.PanelRow,{children:(0,i.jsx)(n.__experimentalUnitControl,{label:(0,o.__)("Multi-Level Indent","priority-plus-navigation"),value:a.multiLevelIndent,onChange:o=>u("multiLevelIndent",o||d.multiLevelIndent),help:(0,o.__)("Indentation for each submenu level","priority-plus-navigation"),units:[{value:"px",label:"px"},{value:"em",label:"em"},{value:"rem",label:"rem"}]})})]})]})}),(0,i.jsxs)("div",{className:"priority-plus-dropdown-customizer-modal__column priority-plus-dropdown-customizer-modal__column--preview",children:[(0,i.jsx)("h3",{children:(0,o.__)("Live Preview","priority-plus-navigation")}),(0,i.jsx)("p",{className:"description",children:(0,o.__)("Preview of your dropdown menu styles.","priority-plus-navigation")}),(0,i.jsx)("div",{className:"priority-plus-dropdown-customizer-modal__preview-placeholder",children:(0,i.jsx)("p",{children:(0,o.__)("Live preview will be displayed here.","priority-plus-navigation")})})]})]}),(0,i.jsxs)("div",{className:"priority-plus-dropdown-customizer-modal__footer",children:[(0,i.jsx)(n.Button,{variant:"tertiary",onClick:()=>{s(d)},children:(0,o.__)("Reset to Defaults","priority-plus-navigation")}),(0,i.jsxs)("div",{className:"priority-plus-dropdown-customizer-modal__footer-actions",children:[(0,i.jsx)(n.Button,{variant:"secondary",onClick:r,children:(0,o.__)("Cancel","priority-plus-navigation")}),(0,i.jsx)(n.Button,{variant:"primary",onClick:()=>{t(a)},children:(0,o.__)("Save","priority-plus-navigation")})]})]})]})})},v=(0,s.createHigherOrderComponent)(o=>e=>{const{name:r,attributes:t}=e;if("core/navigation"!==r)return(0,i.jsx)(o,{...e});const a=(t.className||"").includes("is-style-priority-plus-navigation")||!0===t.priorityNavEnabled;return(0,p.useEffect)(()=>{if(!a)return;const o=document.querySelector(".block-editor-block-inspector");if(!o)return;const e=o.querySelector('.components-toggle-group-control-option-base[data-value="always"]');e&&(e.style.opacity="0.4",e.style.pointerEvents="none",e.style.textDecoration="line-through",e.style.cursor="not-allowed")},[a,t.overlayMenu]),(0,i.jsx)(o,{...e})},"addDisableAlwaysOption"),c=(0,s.createHigherOrderComponent)(e=>r=>{const{name:t,attributes:a,setAttributes:s}=r;if("core/navigation"!==t)return(0,i.jsx)(e,{...r});const d=(a.className||"").includes("is-style-priority-plus-navigation")||!0===a.priorityNavEnabled;if(!d)return(0,i.jsx)(e,{...r});const{priorityNavEnabled:v,priorityNavMoreLabel:c,priorityNavMoreBackgroundColor:y,priorityNavMoreBackgroundColorHover:g,priorityNavMoreTextColor:m,priorityNavMoreTextColorHover:_,priorityNavMorePadding:x,overlayMenu:b,dropdownStyles:h}=a,[w,C]=(0,p.useState)(!1);(0,p.useEffect)(()=>{d&&"always"===b&&s({overlayMenu:"mobile"})},[d,b,s]);const j=(0,l.useSetting)("spacing.spacingSizes")||[];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e,{...r}),(0,i.jsx)(l.InspectorControls,{group:"settings",children:(0,i.jsx)(n.Notice,{status:"info",isDismissible:!1,children:(0,o.__)('Priority Plus Navigation is not compatible with "Always" overlay menu. The overlay menu is set to "Mobile" to allow Priority+ to work on desktop.',"priority-plus-navigation")})}),(0,i.jsxs)(l.InspectorControls,{group:"styles",children:[(0,i.jsx)(n.__experimentalToolsPanel,{label:(0,o.__)("Priority Plus Settings","priority-plus-navigation"),resetAll:()=>s({priorityNavMoreLabel:"More"}),children:(0,i.jsx)(n.__experimentalToolsPanelItem,{hasValue:()=>!!c,label:(0,o.__)("More Button Label","priority-plus-navigation"),onDeselect:()=>s({priorityNavMoreLabel:"More"}),isShownByDefault:!0,children:(0,i.jsx)(n.TextControl,{label:(0,o.__)("More Button Label","priority-plus-navigation"),value:c,onChange:o=>s({priorityNavMoreLabel:o}),help:(0,o.__)('Text displayed on the "More" button',"priority-plus-navigation")})})}),(0,i.jsx)(l.PanelColorSettings,{title:(0,o.__)("Priority Plus Colors","priority-plus-navigation"),colorSettings:[{label:(0,o.__)("Button Text Color","priority-plus-navigation"),value:m,onChange:o=>s({priorityNavMoreTextColor:o||void 0}),clearable:!0},{label:(0,o.__)("Button Text Hover Color","priority-plus-navigation"),value:_,onChange:o=>s({priorityNavMoreTextColorHover:o||void 0}),clearable:!0},{label:(0,o.__)("Button Background Color","priority-plus-navigation"),value:y,onChange:o=>s({priorityNavMoreBackgroundColor:o||void 0}),clearable:!0},{label:(0,o.__)("Button Background Hover Color","priority-plus-navigation"),value:g,onChange:o=>s({priorityNavMoreBackgroundColorHover:o||void 0}),clearable:!0}]}),(0,i.jsx)(n.__experimentalToolsPanel,{label:(0,o.__)("Priority Plus Button","priority-plus-navigation"),resetAll:()=>s({priorityNavMorePadding:void 0}),children:(0,i.jsx)(n.__experimentalToolsPanelItem,{hasValue:()=>!!x&&Object.keys(x).length>0,label:(0,o.__)("Padding","priority-plus-navigation"),onDeselect:()=>s({priorityNavMorePadding:void 0}),isShownByDefault:!0,children:j.length>0?(0,i.jsx)(l.__experimentalSpacingSizesControl,{values:x,onChange:o=>s({priorityNavMorePadding:o}),label:(0,o.__)("Button Padding","priority-plus-navigation"),sides:["top","right","bottom","left"],units:["px","em","rem","vh","vw"]}):(0,i.jsx)(n.BoxControl,{label:(0,o.__)("Button Padding","priority-plus-navigation"),values:x,onChange:o=>s({priorityNavMorePadding:o}),sides:["top","right","bottom","left"],units:["px","em","rem","vh","vw"],allowReset:!0})})}),(0,i.jsx)(n.__experimentalToolsPanel,{label:(0,o.__)("Dropdown Styles","priority-plus-navigation"),children:(0,i.jsx)(n.__experimentalToolsPanelItem,{hasValue:()=>!0,label:(0,o.__)("Customize Dropdown","priority-plus-navigation"),isShownByDefault:!0,children:(0,i.jsx)(n.Button,{variant:"secondary",onClick:()=>C(!0),style:{width:"100%"},children:(0,o.__)("Customize Dropdown","priority-plus-navigation")})})})]}),w&&(0,i.jsx)(u,{dropdownStyles:h,onClose:()=>C(!1),onSave:o=>{s({dropdownStyles:o}),C(!1)}})]})},"withPriorityNavControls");(0,a.addFilter)("editor.BlockEdit","priority-plus-navigation/add-disable-always-option",v,5),(0,a.addFilter)("editor.BlockEdit","priority-plus-navigation/add-priority-plus-navigation-controls",c,10)})();