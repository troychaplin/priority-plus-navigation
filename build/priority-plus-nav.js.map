{"version":3,"file":"priority-plus-nav.js","mappings":"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","sources":["webpack://priority-plus-nav/./src/core/PriorityNav.js","webpack://priority-plus-nav/./src/dom/dom-builder.js","webpack://priority-plus-nav/./src/dom/dom-extractor.js","webpack://priority-plus-nav/./src/events/accordion-handler.js","webpack://priority-plus-nav/./src/events/event-handlers.js","webpack://priority-plus-nav/./src/layout/width-calculator.js","webpack://priority-plus-nav/./src/priority-plus-nav.js","webpack://priority-plus-nav/./src/styles/style.scss?efc4","webpack://priority-plus-nav/./src/utils/constants.js","webpack://priority-plus-nav/./src/utils/dom-utils.js","webpack://priority-plus-nav/./src/utils/html-utils.js","webpack://priority-plus-nav/webpack/bootstrap","webpack://priority-plus-nav/webpack/runtime/chunk loaded","webpack://priority-plus-nav/webpack/runtime/define property getters","webpack://priority-plus-nav/webpack/runtime/hasOwnProperty shorthand","webpack://priority-plus-nav/webpack/runtime/make namespace object","webpack://priority-plus-nav/webpack/runtime/jsonp chunk loading","webpack://priority-plus-nav/webpack/before-startup","webpack://priority-plus-nav/webpack/startup","webpack://priority-plus-nav/webpack/after-startup"],"sourcesContent":["/* global ResizeObserver, requestAnimationFrame, MutationObserver */\n\n/**\n * Internal dependencies\n */\nimport { DEFAULT_MORE_LABEL, DEFAULT_MORE_ICON } from '../utils/constants.js';\nimport { isMeasurable, isInHamburgerMode } from '../utils/dom-utils.js';\nimport { setupEventListeners } from '../events/event-handlers.js';\nimport {\n\tcreateMoreButton,\n\tbuildDropdownFromOverflow,\n} from '../dom/dom-builder.js';\nimport {\n\ttoggleAccordionItem,\n\tcloseAllAccordions,\n} from '../events/accordion-handler.js';\nimport {\n\thasValidWidthCache,\n\tcacheItemWidths,\n\tcacheMoreButtonWidth,\n\tgetGap,\n} from '../layout/width-calculator.js';\n\nclass PriorityNav {\n\t// Static counter for generating unique instance IDs\n\tstatic instanceCounter = 0;\n\n\tconstructor( element ) {\n\t\t// Prevent double initialization\n\t\tif ( element.dataset.priorityNavInitialized === 'true' ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Generate unique instance ID for this PriorityNav instance\n\t\tthis.instanceId = `priority-nav-${ PriorityNav.instanceCounter++ }`;\n\n\t\t// Element should be .wp-block-navigation.is-style-priority-nav\n\t\tif (\n\t\t\t! element.classList.contains( 'wp-block-navigation' ) ||\n\t\t\t! element.classList.contains( 'is-style-priority-nav' )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Mark as initialized to prevent double initialization\n\t\telement.dataset.priorityNavInitialized = 'true';\n\n\t\tthis.nav = element;\n\n\t\t// Get list container\n\t\tthis.list = this.nav.querySelector( '.wp-block-navigation__container' );\n\t\tif ( ! this.list ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Get attributes from nav element\n\t\tthis.moreLabel =\n\t\t\tthis.nav.getAttribute( 'data-more-label' ) || DEFAULT_MORE_LABEL;\n\t\tthis.moreIcon =\n\t\t\tthis.nav.getAttribute( 'data-more-icon' ) || DEFAULT_MORE_ICON;\n\n\t\t// Detect if navigation has openSubmenusOnClick setting\n\t\tthis.openSubmenusOnClick = this.detectOpenSubmenusOnClick();\n\n\t\t// Create More button and dropdown\n\t\tconst { moreContainer, moreButton, dropdown } = createMoreButton(\n\t\t\tthis.list,\n\t\t\tthis.moreLabel,\n\t\t\tthis.moreIcon\n\t\t);\n\t\tthis.moreContainer = moreContainer;\n\t\tthis.moreButton = moreButton;\n\t\tthis.dropdown = dropdown;\n\n\t\t// Initialize state\n\t\tthis.items = Array.from( this.list.children );\n\t\tthis.itemWidths = [];\n\t\tthis.isOpen = false;\n\t\tthis.isCalculating = false;\n\t\tthis.openAccordions = [];\n\t\tthis.submenuCounter = { value: 0 }; // For generating unique IDs (object for mutation)\n\n\t\t// Track responsive container for hamburger mode detection\n\t\tthis.responsiveContainer = this.nav.querySelector(\n\t\t\t'.wp-block-navigation__responsive-container'\n\t\t);\n\t\tthis.mutationObserver = null;\n\t\tthis.retryTimeout = null;\n\t\tthis.isEnabled = true; // Track if Priority Nav should be active\n\t\tthis.moreButtonWidth = null; // Cache more button width\n\n\t\t// Store event handlers for cleanup\n\t\tthis.eventHandlers = null;\n\n\t\tthis.init();\n\t}\n\n\t/**\n\t * Detect if navigation has openSubmenusOnClick setting\n\t * Checks attributes and classes on nav element and list items\n\t * @return {boolean} True if submenus should open on click\n\t */\n\tdetectOpenSubmenusOnClick() {\n\t\t// Check data attributes on nav element\n\t\tconst dataAttr =\n\t\t\tthis.nav.getAttribute( 'data-opensubmenusonclick' ) ||\n\t\t\tthis.nav.getAttribute( 'data-open-submenus-on-click' );\n\n\t\tif ( dataAttr ) {\n\t\t\treturn dataAttr === 'true' || dataAttr === '1' || dataAttr === '';\n\t\t}\n\n\t\t// Check for generic data attributes containing the keywords\n\t\tif ( this.nav.attributes ) {\n\t\t\tfor ( let i = 0; i < this.nav.attributes.length; i++ ) {\n\t\t\t\tconst attr = this.nav.attributes[ i ];\n\t\t\t\tconst name = attr.name.toLowerCase();\n\t\t\t\t// WordPress may use various formats\n\t\t\t\tif (\n\t\t\t\t\tname.includes( 'open' ) &&\n\t\t\t\t\tname.includes( 'submenu' ) &&\n\t\t\t\t\tname.includes( 'click' )\n\t\t\t\t) {\n\t\t\t\t\tconst value = attr.value;\n\t\t\t\t\treturn value === 'true' || value === '1' || value === '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Check for class-based indicators on nav element\n\t\tif (\n\t\t\tthis.nav.classList.contains( 'open-on-click' ) ||\n\t\t\tthis.nav.classList.contains( 'open-submenus-on-click' ) ||\n\t\t\tthis.nav.classList.contains( 'has-open-submenus-on-click' )\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check list items for the class (WordPress might set it on individual items)\n\t\tif ( this.list ) {\n\t\t\tconst firstItem = this.list.querySelector(\n\t\t\t\t'li.has-child, li.open-on-click'\n\t\t\t);\n\t\t\tif (\n\t\t\t\tfirstItem &&\n\t\t\t\t( firstItem.classList.contains( 'open-on-click' ) ||\n\t\t\t\t\tfirstItem.classList.contains( 'open-submenus-on-click' ) )\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// Default to false if not found\n\t\treturn false;\n\t}\n\n\tinit() {\n\t\t// Guard against missing elements\n\t\tif ( ! this.nav || ! document.body.contains( this.nav ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Set up event listeners\n\t\tthis.eventHandlers = setupEventListeners(\n\t\t\t{\n\t\t\t\tmoreButton: this.moreButton,\n\t\t\t\tmoreContainer: this.moreContainer,\n\t\t\t\tdropdown: this.dropdown,\n\t\t\t},\n\t\t\tthis,\n\t\t\t{\n\t\t\t\ttoggleDropdown: () => this.toggleDropdown(),\n\t\t\t\tcloseDropdown: () => this.closeDropdown(),\n\t\t\t\tcloseAllAccordions: () => this.closeAllAccordions(),\n\t\t\t\ttoggleAccordionItem: ( button, submenu ) =>\n\t\t\t\t\tthis.toggleAccordionItem( button, submenu ),\n\t\t\t}\n\t\t);\n\n\t\tthis.setupResponsiveObserver();\n\n\t\t// Check if we should enable Priority Nav\n\t\tif ( this.isInHamburgerMode() ) {\n\t\t\tthis.disablePriorityNav();\n\t\t} else {\n\t\t\tthis.enablePriorityNav();\n\t\t}\n\n\t\t// Set up resize observer with error handling\n\t\tif ( typeof ResizeObserver !== 'undefined' ) {\n\t\t\tthis.resizeObserver = new ResizeObserver( () => {\n\t\t\t\t// Guard against detached elements\n\t\t\t\tif ( ! document.body.contains( this.nav ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( ! this.isCalculating ) {\n\t\t\t\t\t// Check if we've transitioned between hamburger and desktop mode\n\t\t\t\t\tconst wasEnabled = this.isEnabled;\n\t\t\t\t\tconst inHamburger = this.isInHamburgerMode();\n\n\t\t\t\t\tif ( inHamburger && wasEnabled ) {\n\t\t\t\t\t\tthis.disablePriorityNav();\n\t\t\t\t\t} else if ( ! inHamburger && ! wasEnabled ) {\n\t\t\t\t\t\tthis.enablePriorityNav();\n\t\t\t\t\t} else if ( ! inHamburger && wasEnabled ) {\n\t\t\t\t\t\t// Still in desktop mode, just recalculate\n\t\t\t\t\t\trequestAnimationFrame( () => this.checkOverflow() );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t\tthis.resizeObserver.observe( this.nav );\n\t\t}\n\t}\n\n\t/**\n\t * Check if navigation is in hamburger/responsive mode\n\t * @return {boolean} True if in hamburger mode\n\t */\n\tisInHamburgerMode() {\n\t\treturn isInHamburgerMode( this.responsiveContainer, this.list );\n\t}\n\n\t/**\n\t * Disable Priority Nav when in hamburger mode\n\t */\n\tdisablePriorityNav() {\n\t\tif ( ! this.items || ! Array.isArray( this.items ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isEnabled = false;\n\n\t\t// Show all items\n\t\tthis.items.forEach( ( item ) => {\n\t\t\tif ( item && item.style ) {\n\t\t\t\titem.style.display = '';\n\t\t\t}\n\t\t} );\n\n\t\t// Hide the More button\n\t\tif ( this.moreContainer && this.moreContainer.style ) {\n\t\t\tthis.moreContainer.style.display = 'none';\n\t\t}\n\n\t\t// Close dropdown if open\n\t\tthis.closeDropdown();\n\t}\n\n\t/**\n\t * Enable Priority Nav and recalculate\n\t */\n\tenablePriorityNav() {\n\t\tthis.isEnabled = true;\n\n\t\t// Only proceed if measurable\n\t\tif ( ! isMeasurable( this.list ) ) {\n\t\t\t// Schedule retry\n\t\t\tthis.scheduleRetry();\n\t\t\treturn;\n\t\t}\n\n\t\t// Cache widths if needed (or if they contain zeros from previous hidden state)\n\t\tconst needsRecache =\n\t\t\tthis.itemWidths.length === 0 ||\n\t\t\tthis.itemWidths.some( ( width ) => width === 0 );\n\n\t\tif ( needsRecache ) {\n\t\t\tthis.itemWidths = cacheItemWidths( this.list, this.items, () =>\n\t\t\t\tthis.scheduleRetry()\n\t\t\t);\n\t\t}\n\n\t\t// Recalculate overflow\n\t\trequestAnimationFrame( () => {\n\t\t\tthis.checkOverflow();\n\t\t} );\n\t}\n\n\t/**\n\t * Schedule a retry when menu becomes visible\n\t * @param {number} maxAttempts - Maximum number of retry attempts\n\t */\n\tscheduleRetry( maxAttempts = 20 ) {\n\t\tif ( this.retryTimeout ) {\n\t\t\tclearTimeout( this.retryTimeout );\n\t\t}\n\n\t\tlet attempts = 0;\n\t\tconst tryEnable = () => {\n\t\t\tattempts++;\n\n\t\t\tif ( isMeasurable( this.list ) && ! this.isInHamburgerMode() ) {\n\t\t\t\tthis.enablePriorityNav();\n\t\t\t\tthis.retryTimeout = null;\n\t\t\t} else if ( attempts < maxAttempts ) {\n\t\t\t\tthis.retryTimeout = setTimeout( tryEnable, 100 );\n\t\t\t} else {\n\t\t\t\t// Give up after max attempts\n\t\t\t\tthis.retryTimeout = null;\n\t\t\t}\n\t\t};\n\n\t\tthis.retryTimeout = setTimeout( tryEnable, 100 );\n\t}\n\n\t/**\n\t * Set up observer for responsive container changes\n\t */\n\tsetupResponsiveObserver() {\n\t\tif ( typeof MutationObserver === 'undefined' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! this.responsiveContainer ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Watch for attribute and class changes on responsive container\n\t\tthis.mutationObserver = new MutationObserver( ( mutations ) => {\n\t\t\t// Guard against detached elements\n\t\t\tif ( ! document.body.contains( this.nav ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet shouldCheck = false;\n\n\t\t\tmutations.forEach( ( mutation ) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === 'attributes' &&\n\t\t\t\t\t( mutation.attributeName === 'aria-hidden' ||\n\t\t\t\t\t\tmutation.attributeName === 'class' )\n\t\t\t\t) {\n\t\t\t\t\tshouldCheck = true;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tif ( shouldCheck ) {\n\t\t\t\tconst inHamburger = this.isInHamburgerMode();\n\n\t\t\t\tif ( inHamburger && this.isEnabled ) {\n\t\t\t\t\tthis.disablePriorityNav();\n\t\t\t\t} else if ( ! inHamburger && ! this.isEnabled ) {\n\t\t\t\t\tthis.enablePriorityNav();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\tthis.mutationObserver.observe( this.responsiveContainer, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [ 'aria-hidden', 'class' ],\n\t\t} );\n\n\t\t// Also observe the list container for visibility changes\n\t\tif ( this.list && document.body.contains( this.list ) ) {\n\t\t\tthis.mutationObserver.observe( this.list, {\n\t\t\t\tattributes: true,\n\t\t\t\tattributeFilter: [ 'style', 'class' ],\n\t\t\t\tattributeOldValue: false,\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Check overflow and update display\n\t */\n\tcheckOverflow() {\n\t\t// Don't run if disabled (hamburger mode) or not measurable\n\t\tif ( ! this.isEnabled || ! isMeasurable( this.list ) ) {\n\t\t\tthis.isCalculating = false;\n\t\t\treturn;\n\t\t}\n\n\t\t// Guard against detached DOM elements\n\t\tif ( ! document.body.contains( this.nav ) ) {\n\t\t\tthis.isCalculating = false;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isCalculating = true;\n\n\t\t// Ensure we have valid item widths\n\t\tif ( ! hasValidWidthCache( this.itemWidths, this.items.length ) ) {\n\t\t\tthis.itemWidths = cacheItemWidths( this.list, this.items, () =>\n\t\t\t\tthis.scheduleRetry()\n\t\t\t);\n\t\t\t// If still invalid, abort\n\t\t\tif ( ! hasValidWidthCache( this.itemWidths, this.items.length ) ) {\n\t\t\t\tthis.isCalculating = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Get measurements\n\t\tconst availableWidth = this.calculateAvailableWidth();\n\t\tthis.moreButtonWidth = cacheMoreButtonWidth(\n\t\t\tthis.moreButton,\n\t\t\tthis.moreContainer,\n\t\t\tthis.moreButtonWidth\n\t\t);\n\n\t\t// Handle edge case where more button is larger than available width\n\t\tif ( this.moreButtonWidth >= availableWidth ) {\n\t\t\tthis.items.forEach( ( item ) => ( item.style.display = 'none' ) );\n\t\t\tthis.moreContainer.style.display = '';\n\t\t\tthis.isCalculating = false;\n\t\t\treturn;\n\t\t}\n\n\t\t// Get gap after early return check\n\t\tconst gap = getGap( this.list, this.nav );\n\n\t\t// Calculate visible items\n\t\tconst visibleCount = this.calculateVisibleItems(\n\t\t\tavailableWidth,\n\t\t\tthis.moreButtonWidth,\n\t\t\tgap\n\t\t);\n\n\t\t// Update display\n\t\tif ( visibleCount === this.items.length ) {\n\t\t\t// All items fit\n\t\t\tthis.items.forEach( ( item ) => ( item.style.display = '' ) );\n\t\t\tthis.moreContainer.style.display = 'none';\n\t\t\tthis.closeDropdown();\n\t\t} else {\n\t\t\t// Ensure more button is hidden during DOM manipulation\n\t\t\tthis.moreContainer.style.display = 'none';\n\n\t\t\t// Hide overflow items FIRST to prevent button from wrapping\n\t\t\tfor ( let i = visibleCount; i < this.items.length; i++ ) {\n\t\t\t\tthis.items[ i ].style.display = 'none';\n\t\t\t}\n\n\t\t\t// Show visible items\n\t\t\tfor ( let i = 0; i < visibleCount; i++ ) {\n\t\t\t\tthis.items[ i ].style.display = '';\n\t\t\t}\n\n\t\t\t// Force a reflow to ensure layout updates before showing button\n\t\t\t// Reading offsetHeight forces the browser to recalculate layout\n\t\t\tvoid this.list.offsetHeight;\n\n\t\t\t// Build dropdown from overflow (items already hidden and layout updated)\n\t\t\tbuildDropdownFromOverflow(\n\t\t\t\tthis.dropdown,\n\t\t\t\tthis.items,\n\t\t\t\tvisibleCount,\n\t\t\t\tthis.instanceId,\n\t\t\t\tthis.submenuCounter,\n\t\t\t\tthis.openSubmenusOnClick\n\t\t\t);\n\n\t\t\t// Show more button AFTER items are hidden and layout has reflowed\n\t\t\tthis.moreContainer.style.display = '';\n\t\t}\n\n\t\tthis.isCalculating = false;\n\t}\n\n\t/**\n\t * Calculate available width for navigation items\n\t * @return {number} Available width in pixels\n\t */\n\tcalculateAvailableWidth() {\n\t\t// Get actual visible container width - prefer the nav element itself\n\t\tconst navRect = this.nav.getBoundingClientRect();\n\t\tconst navStyles = window.getComputedStyle( this.nav );\n\t\tconst padding =\n\t\t\tparseFloat( navStyles.paddingLeft ) +\n\t\t\tparseFloat( navStyles.paddingRight );\n\n\t\t// Use nav width\n\t\tconst containerWidth = navRect.width > 0 ? navRect.width : 0;\n\n\t\treturn containerWidth > 0 ? containerWidth - padding : 0;\n\t}\n\n\t/**\n\t * Calculate how many items can fit in available width\n\t * @param {number} availableWidth  - Available width in pixels\n\t * @param {number} moreButtonWidth - Width of more button in pixels\n\t * @param {number} gap             - Gap between items in pixels\n\t * @return {number} Number of visible items\n\t */\n\tcalculateVisibleItems( availableWidth, moreButtonWidth, gap ) {\n\t\t// Calculate total width needed for all items\n\t\tlet totalWidth = 0;\n\t\tfor ( let i = 0; i < this.items.length; i++ ) {\n\t\t\tconst itemWidth = this.itemWidths[ i ];\n\t\t\tconst gapWidth = i > 0 ? gap : 0;\n\t\t\ttotalWidth += gapWidth + itemWidth;\n\t\t}\n\n\t\t// If everything fits, show all items\n\t\tif ( totalWidth <= availableWidth ) {\n\t\t\treturn this.items.length;\n\t\t}\n\n\t\t// Calculate how many items fit with the More button visible\n\t\tlet usedWidth = 0;\n\t\tlet visibleCount = 0;\n\n\t\tfor ( let i = 0; i < this.items.length; i++ ) {\n\t\t\tconst itemWidth = this.itemWidths[ i ];\n\t\t\tconst gapWidth = i > 0 ? gap : 0;\n\t\t\tconst moreButtonGap = gap;\n\t\t\tconst itemTotalWidth = gapWidth + itemWidth;\n\n\t\t\t// Check if this item + more button would fit\n\t\t\tconst wouldFit =\n\t\t\t\tusedWidth + itemTotalWidth + moreButtonGap + moreButtonWidth <=\n\t\t\t\tavailableWidth;\n\n\t\t\t// Always show at least one item\n\t\t\tif ( wouldFit || i === 0 ) {\n\t\t\t\tusedWidth += itemTotalWidth;\n\t\t\t\tvisibleCount++;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn visibleCount;\n\t}\n\n\ttoggleDropdown() {\n\t\tif ( this.isOpen ) {\n\t\t\tthis.closeDropdown();\n\t\t} else {\n\t\t\tthis.openDropdown();\n\t\t}\n\t}\n\n\topenDropdown() {\n\t\tif ( ! this.dropdown || ! this.moreButton ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isOpen = true;\n\t\tthis.dropdown.classList.add( 'is-open' );\n\t\tthis.moreButton.setAttribute( 'aria-expanded', 'true' );\n\t}\n\n\tcloseDropdown() {\n\t\tif ( ! this.dropdown || ! this.moreButton ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isOpen = false;\n\t\tthis.dropdown.classList.remove( 'is-open' );\n\t\tthis.moreButton.setAttribute( 'aria-expanded', 'false' );\n\t\t// Close all open accordions\n\t\tthis.closeAllAccordions();\n\t}\n\n\t/**\n\t * Toggle an accordion item\n\t * @param {HTMLElement} button  - Accordion toggle button\n\t * @param {HTMLElement} submenu - Submenu element\n\t */\n\ttoggleAccordionItem( button, submenu ) {\n\t\ttoggleAccordionItem( button, submenu, this, this.dropdown );\n\t}\n\n\t/**\n\t * Close all open accordions\n\t */\n\tcloseAllAccordions() {\n\t\tcloseAllAccordions( this );\n\t}\n\n\t/**\n\t * Cleanup observers, timeouts, and event listeners\n\t */\n\tdestroy() {\n\t\t// Cleanup resize observer\n\t\tif ( this.resizeObserver ) {\n\t\t\tthis.resizeObserver.disconnect();\n\t\t\tthis.resizeObserver = null;\n\t\t}\n\n\t\t// Cleanup mutation observer\n\t\tif ( this.mutationObserver ) {\n\t\t\tthis.mutationObserver.disconnect();\n\t\t\tthis.mutationObserver = null;\n\t\t}\n\n\t\t// Cleanup retry timeout\n\t\tif ( this.retryTimeout ) {\n\t\t\tclearTimeout( this.retryTimeout );\n\t\t\tthis.retryTimeout = null;\n\t\t}\n\n\t\t// Cleanup event listeners\n\t\tif ( this.eventHandlers ) {\n\t\t\tconst {\n\t\t\t\tmoreButtonClickHandler,\n\t\t\t\tdocumentClickHandler,\n\t\t\t\tdocumentKeydownHandler,\n\t\t\t\tdropdownClickHandler,\n\t\t\t} = this.eventHandlers;\n\n\t\t\tif ( this.moreButton && moreButtonClickHandler ) {\n\t\t\t\tthis.moreButton.removeEventListener(\n\t\t\t\t\t'click',\n\t\t\t\t\tmoreButtonClickHandler\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( documentClickHandler ) {\n\t\t\t\tdocument.removeEventListener(\n\t\t\t\t\t'click',\n\t\t\t\t\tdocumentClickHandler,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( documentKeydownHandler ) {\n\t\t\t\tdocument.removeEventListener(\n\t\t\t\t\t'keydown',\n\t\t\t\t\tdocumentKeydownHandler\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( this.dropdown && dropdownClickHandler ) {\n\t\t\t\tthis.dropdown.removeEventListener(\n\t\t\t\t\t'click',\n\t\t\t\t\tdropdownClickHandler\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default PriorityNav;\n","/**\n * DOM building utilities for PriorityNav\n */\nimport { DEFAULT_MORE_LABEL, DEFAULT_MORE_ICON } from '../utils/constants.js';\nimport { escapeHtml } from '../utils/html-utils.js';\nimport { extractNavItemData } from './dom-extractor.js';\n\n/**\n * Create the More button and dropdown container\n * @param {HTMLElement} list      - Navigation list container\n * @param {string}      moreLabel - Label for the More button\n * @param {string}      moreIcon  - Icon type for the More button\n * @return {Object} Object containing moreContainer, moreButton, and dropdown elements\n */\nexport function createMoreButton(\n\tlist,\n\tmoreLabel = DEFAULT_MORE_LABEL,\n\tmoreIcon = DEFAULT_MORE_ICON\n) {\n\t// Create the more container\n\tconst moreContainer = document.createElement( 'div' );\n\tmoreContainer.className = 'priority-nav-more';\n\n\t// Create button\n\tconst moreButton = document.createElement( 'button' );\n\tmoreButton.type = 'button';\n\tmoreButton.className = 'priority-nav-more-button wp-block-navigation-item';\n\tmoreButton.setAttribute( 'aria-expanded', 'false' );\n\tmoreButton.setAttribute( 'aria-haspopup', 'true' );\n\tmoreButton.setAttribute( 'aria-label', moreLabel );\n\n\tconst iconMap = {\n\t\tchevron: '▼',\n\t\tplus: '+',\n\t\tmenu: '≡',\n\t};\n\n\t// Build icon HTML only if icon exists in map\n\tconst iconHTML = iconMap[ moreIcon ]\n\t\t? `<span class=\"priority-nav-icon\">${ iconMap[ moreIcon ] }</span>`\n\t\t: '';\n\n\tmoreButton.innerHTML = `\n\t\t<span class=\"wp-block-navigation-item__label\">${ moreLabel }</span>\n\t\t${ iconHTML }\n\t`;\n\n\t// Create dropdown\n\tconst dropdown = document.createElement( 'ul' );\n\tdropdown.className =\n\t\t'priority-nav-dropdown wp-block-navigation__submenu-container';\n\tdropdown.setAttribute( 'role', 'menu' );\n\n\tmoreContainer.appendChild( moreButton );\n\tmoreContainer.appendChild( dropdown );\n\n\t// Insert after the navigation list\n\tlist.parentNode.appendChild( moreContainer );\n\tmoreContainer.style.display = 'none';\n\n\treturn {\n\t\tmoreContainer,\n\t\tmoreButton,\n\t\tdropdown,\n\t};\n}\n\n/**\n * Build accordion HTML for a navigation item\n * @param {Object}  data                - Navigation item data\n * @param {number}  level               - Nesting level\n * @param {string}  instanceId          - Unique instance ID\n * @param {number}  submenuCounter      - Counter for generating unique IDs (will be mutated)\n * @param {boolean} openSubmenusOnClick - Whether submenus open on click\n * @return {string} HTML string for the accordion item\n */\nexport function buildAccordionHTML(\n\tdata,\n\tlevel,\n\tinstanceId,\n\tsubmenuCounter,\n\topenSubmenusOnClick\n) {\n\tconst submenuId = `${ instanceId }-submenu-${ submenuCounter.value++ }`;\n\tlet html = '';\n\n\tif ( data.hasSubmenu ) {\n\t\t// Item has children - build accordion\n\t\tif ( openSubmenusOnClick ) {\n\t\t\t// Click mode: entire item is clickable\n\t\t\thtml = `\n\t\t\t\t<button type=\"button\" class=\"priority-nav-accordion-toggle priority-nav-accordion-toggle-full\" \n\t\t\t\t        aria-expanded=\"false\" aria-controls=\"${ submenuId }\">\n\t\t\t\t\t<span class=\"priority-nav-accordion-text\">${ escapeHtml( data.text ) }</span>\n\t\t\t\t\t<span class=\"priority-nav-accordion-arrow\" aria-hidden=\"true\">›</span>\n\t\t\t\t</button>\n\t\t\t\t<ul class=\"priority-nav-accordion-content\" id=\"${ submenuId }\" aria-hidden=\"true\">\n\t\t\t`;\n\t\t} else {\n\t\t\t// Arrow mode: link stays functional, separate arrow button\n\t\t\thtml = `\n\t\t\t\t<span class=\"priority-nav-accordion-wrapper\">\n\t\t\t\t\t<a href=\"${ escapeHtml(\n\t\t\t\t\t\tdata.url\n\t\t\t\t\t) }\" class=\"priority-nav-accordion-link\">${ escapeHtml(\n\t\t\t\t\t\tdata.text\n\t\t\t\t\t) }</a>\n\t\t\t\t\t<button type=\"button\" class=\"priority-nav-accordion-toggle priority-nav-accordion-toggle-arrow\" \n\t\t\t\t\t        aria-expanded=\"false\" aria-controls=\"${ submenuId }\" aria-label=\"Toggle submenu\">\n\t\t\t\t\t\t<span class=\"priority-nav-accordion-arrow\" aria-hidden=\"true\">›</span>\n\t\t\t\t\t</button>\n\t\t\t\t</span>\n\t\t\t\t<ul class=\"priority-nav-accordion-content\" id=\"${ submenuId }\" aria-hidden=\"true\">\n\t\t\t`;\n\t\t}\n\n\t\t// Build children\n\t\tdata.children.forEach( ( child ) => {\n\t\t\thtml += `<li>${ buildAccordionHTML(\n\t\t\t\tchild,\n\t\t\t\tlevel + 1,\n\t\t\t\tinstanceId,\n\t\t\t\tsubmenuCounter,\n\t\t\t\topenSubmenusOnClick\n\t\t\t) }</li>`;\n\t\t} );\n\n\t\thtml += '</ul>';\n\t} else {\n\t\t// No submenu - just a link\n\t\thtml = `<a href=\"${ escapeHtml( data.url ) }\">${ escapeHtml(\n\t\t\tdata.text\n\t\t) }</a>`;\n\t}\n\n\treturn html;\n}\n\n/**\n * Build dropdown from overflow items\n * @param {HTMLElement}        dropdown            - Dropdown container element\n * @param {Array<HTMLElement>} items               - All navigation items\n * @param {number}             visibleCount        - Number of visible items\n * @param {string}             instanceId          - Unique instance ID\n * @param {Object}             submenuCounter      - Counter object for generating unique IDs (will be mutated)\n * @param {boolean}            openSubmenusOnClick - Whether submenus open on click\n */\nexport function buildDropdownFromOverflow(\n\tdropdown,\n\titems,\n\tvisibleCount,\n\tinstanceId,\n\tsubmenuCounter,\n\topenSubmenusOnClick\n) {\n\tdropdown.innerHTML = '';\n\tsubmenuCounter.value = 0; // Reset counter\n\n\tfor ( let i = visibleCount; i < items.length; i++ ) {\n\t\t// Extract data from the item\n\t\tconst itemData = extractNavItemData( items[ i ] );\n\n\t\t// Build fresh accordion HTML\n\t\tconst accordionHTML = buildAccordionHTML(\n\t\t\titemData,\n\t\t\t0,\n\t\t\tinstanceId,\n\t\t\tsubmenuCounter,\n\t\t\topenSubmenusOnClick\n\t\t);\n\n\t\t// Create container and insert HTML\n\t\tconst container = document.createElement( 'li' );\n\t\tcontainer.innerHTML = accordionHTML;\n\n\t\tdropdown.appendChild( container );\n\t}\n}\n","/**\n * DOM extraction utilities for PriorityNav\n */\nimport {\n\textractLinkText,\n\tremoveChildTextFromParent,\n} from '../utils/html-utils.js';\n\n/**\n * Extract data from a navigation list item\n * @param {HTMLElement} item - Navigation list item element\n * @return {Object} Extracted navigation item data\n */\nexport function extractNavItemData( item ) {\n\tconst data = {\n\t\ttext: '',\n\t\turl: '#',\n\t\thasSubmenu: false,\n\t\tchildren: [],\n\t};\n\n\t// Check for submenu FIRST - if it exists, we need to get text differently\n\tconst submenuContainer = item.querySelector(\n\t\t':scope > .wp-block-navigation__submenu-container'\n\t);\n\n\t// Find the link element\n\tlet linkElement = item.querySelector( ':scope > a' );\n\tif ( ! linkElement ) {\n\t\tlinkElement = item.querySelector(\n\t\t\t':scope > .wp-block-navigation-item__content a'\n\t\t);\n\t}\n\n\tif ( ! linkElement ) {\n\t\t// Fallback: try to get text from item directly, but exclude submenu text\n\t\tif ( submenuContainer ) {\n\t\t\t// Clone item, remove submenu, then get text\n\t\t\tconst clone = item.cloneNode( true );\n\t\t\tconst cloneSubmenu = clone.querySelector(\n\t\t\t\t'.wp-block-navigation__submenu-container'\n\t\t\t);\n\t\t\tif ( cloneSubmenu ) {\n\t\t\t\tcloneSubmenu.remove();\n\t\t\t}\n\t\t\tdata.text = clone.textContent.trim();\n\t\t} else {\n\t\t\tdata.text = item.textContent.trim();\n\t\t}\n\n\t\tif ( submenuContainer ) {\n\t\t\tdata.hasSubmenu = true;\n\t\t\tconst childItems =\n\t\t\t\tsubmenuContainer.querySelectorAll( ':scope > li' );\n\t\t\tchildItems.forEach( ( childItem ) => {\n\t\t\t\tdata.children.push( extractNavItemData( childItem ) );\n\t\t\t} );\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t// Extract text from link\n\tdata.text = extractLinkText( linkElement );\n\n\t// Ensure we don't have submenu text mixed in (safety check)\n\tif ( submenuContainer && data.text ) {\n\t\tdata.text = removeChildTextFromParent( data.text, submenuContainer );\n\t}\n\n\tdata.url = linkElement.getAttribute( 'href' ) || '#';\n\n\t// Extract children if submenu exists\n\tif ( submenuContainer ) {\n\t\tdata.hasSubmenu = true;\n\n\t\t// Extract children recursively\n\t\tconst childItems = submenuContainer.querySelectorAll( ':scope > li' );\n\t\tchildItems.forEach( ( childItem ) => {\n\t\t\tdata.children.push( extractNavItemData( childItem ) );\n\t\t} );\n\t}\n\n\treturn data;\n}\n","/**\n * Accordion handling utilities for PriorityNav\n */\n\n/**\n * Toggle an accordion item open/closed\n * @param {HTMLElement} button   - Accordion toggle button\n * @param {HTMLElement} submenu  - Submenu element\n * @param {Object}      instance - PriorityNav instance\n * @param {HTMLElement} dropdown - Dropdown container (for nested accordion lookup)\n */\nexport function toggleAccordionItem( button, submenu, instance, dropdown ) {\n\tconst isExpanded = button.getAttribute( 'aria-expanded' ) === 'true';\n\n\tif ( isExpanded ) {\n\t\t// Close this accordion\n\t\tbutton.setAttribute( 'aria-expanded', 'false' );\n\t\tsubmenu.style.setProperty( 'display', 'none', 'important' );\n\t\tsubmenu.classList.remove( 'is-open' );\n\t\tsubmenu.setAttribute( 'aria-hidden', 'true' );\n\n\t\t// Remove from open accordions array\n\t\tinstance.openAccordions = instance.openAccordions.filter(\n\t\t\t( item ) => item.button !== button\n\t\t);\n\n\t\t// Close any nested accordions\n\t\tconst nestedAccordions = submenu.querySelectorAll(\n\t\t\t'.priority-nav-accordion-toggle[aria-expanded=\"true\"]'\n\t\t);\n\t\tnestedAccordions.forEach( ( nestedButton ) => {\n\t\t\tconst nestedSubmenuId =\n\t\t\t\tnestedButton.getAttribute( 'aria-controls' );\n\t\t\t// Use scoped lookup within this instance's dropdown to avoid cross-instance collisions\n\t\t\tconst nestedSubmenu = dropdown.querySelector(\n\t\t\t\t`#${ nestedSubmenuId }`\n\t\t\t);\n\t\t\tif ( nestedSubmenu ) {\n\t\t\t\tnestedButton.setAttribute( 'aria-expanded', 'false' );\n\t\t\t\tnestedSubmenu.style.setProperty(\n\t\t\t\t\t'display',\n\t\t\t\t\t'none',\n\t\t\t\t\t'important'\n\t\t\t\t);\n\t\t\t\tnestedSubmenu.classList.remove( 'is-open' );\n\t\t\t\tnestedSubmenu.setAttribute( 'aria-hidden', 'true' );\n\t\t\t}\n\t\t} );\n\t} else {\n\t\t// Open this accordion\n\t\tbutton.setAttribute( 'aria-expanded', 'true' );\n\t\t// Force display block with !important via style\n\t\tsubmenu.style.setProperty( 'display', 'block', 'important' );\n\t\tsubmenu.style.setProperty( 'opacity', '1', 'important' );\n\t\tsubmenu.style.setProperty( 'visibility', 'visible', 'important' );\n\t\tsubmenu.style.setProperty( 'position', 'static', 'important' );\n\t\tsubmenu.classList.add( 'is-open' );\n\t\tsubmenu.setAttribute( 'aria-hidden', 'false' );\n\n\t\t// Add to open accordions array\n\t\tinstance.openAccordions.push( { button, submenu } );\n\t}\n}\n\n/**\n * Close all open accordions\n * @param {Object} instance - PriorityNav instance\n */\nexport function closeAllAccordions( instance ) {\n\tinstance.openAccordions.forEach( ( { button, submenu } ) => {\n\t\tbutton.setAttribute( 'aria-expanded', 'false' );\n\t\tsubmenu.style.setProperty( 'display', 'none', 'important' );\n\t\tsubmenu.classList.remove( 'is-open' );\n\t\tsubmenu.setAttribute( 'aria-hidden', 'true' );\n\t} );\n\tinstance.openAccordions = [];\n}\n","/**\n * Event handling utilities for PriorityNav\n */\n\n/**\n * Set up all event listeners\n * @param {Object} elements  - DOM elements\n * @param {Object} instance  - PriorityNav instance\n * @param {Object} callbacks - Callback functions\n * @return {Object} Object containing all handler functions for cleanup\n */\nexport function setupEventListeners( elements, instance, callbacks ) {\n\tconst { moreButton, moreContainer, dropdown } = elements;\n\tconst {\n\t\ttoggleDropdown,\n\t\tcloseDropdown,\n\t\tcloseAllAccordions,\n\t\ttoggleAccordionItem,\n\t} = callbacks;\n\n\t// More button click handler\n\tconst moreButtonClickHandler = ( e ) => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\ttoggleDropdown();\n\t};\n\tmoreButton.addEventListener( 'click', moreButtonClickHandler );\n\n\t// Document click handler - close dropdown when clicking outside\n\tconst documentClickHandler = ( e ) => {\n\t\tif (\n\t\t\tmoreContainer &&\n\t\t\t! moreContainer.contains( e.target ) &&\n\t\t\tinstance.isOpen\n\t\t) {\n\t\t\tcloseDropdown();\n\t\t}\n\t};\n\tdocument.addEventListener( 'click', documentClickHandler, true );\n\n\t// Document keydown handler - close on Escape\n\tconst documentKeydownHandler = ( e ) => {\n\t\tif ( e.key === 'Escape' && instance.isOpen ) {\n\t\t\t// If accordions are open, close them first, otherwise close dropdown\n\t\t\tif ( instance.openAccordions.length > 0 ) {\n\t\t\t\tcloseAllAccordions();\n\t\t\t\te.preventDefault();\n\t\t\t} else {\n\t\t\t\tcloseDropdown();\n\t\t\t}\n\t\t}\n\t};\n\tdocument.addEventListener( 'keydown', documentKeydownHandler );\n\n\t// Event delegation for accordion toggles\n\tconst dropdownClickHandler = ( e ) => {\n\t\tconst toggle = e.target.closest( '.priority-nav-accordion-toggle' );\n\t\tif ( toggle ) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tconst submenuId = toggle.getAttribute( 'aria-controls' );\n\t\t\t// Use scoped lookup within this instance's dropdown to avoid cross-instance collisions\n\t\t\tconst submenu = dropdown.querySelector( `#${ submenuId }` );\n\t\t\tif ( submenu ) {\n\t\t\t\ttoggleAccordionItem( toggle, submenu, instance );\n\t\t\t}\n\t\t}\n\t};\n\tdropdown.addEventListener( 'click', dropdownClickHandler );\n\n\t// Return handlers for cleanup\n\treturn {\n\t\tmoreButtonClickHandler,\n\t\tdocumentClickHandler,\n\t\tdocumentKeydownHandler,\n\t\tdropdownClickHandler,\n\t};\n}\n","/**\n * Width calculation utilities for PriorityNav\n */\nimport { DEFAULT_GAP } from '../utils/constants.js';\nimport { isMeasurable, getElementWidth } from '../utils/dom-utils.js';\n\n/**\n * Check if item widths cache is valid\n * @param {Array<number>} itemWidths  - Cached item widths\n * @param {number}        itemsLength - Number of items\n * @return {boolean} True if cache is valid\n */\nexport function hasValidWidthCache( itemWidths, itemsLength ) {\n\treturn (\n\t\titemWidths.length === itemsLength &&\n\t\t! itemWidths.some( ( width ) => width === 0 )\n\t);\n}\n\n/**\n * Cache the widths of all navigation items\n * Only measures if element is visible and cache is invalid\n * @param {HTMLElement}        list          - Navigation list container\n * @param {Array<HTMLElement>} items         - Navigation items\n * @param {Function}           scheduleRetry - Function to call if measurement fails\n * @return {Array<number>} Array of item widths\n */\nexport function cacheItemWidths( list, items, scheduleRetry ) {\n\t// Only cache if measurable\n\tif ( ! isMeasurable( list ) ) {\n\t\treturn [];\n\t}\n\n\t// Show all items for accurate measurement\n\titems.forEach( ( item ) => {\n\t\titem.style.display = '';\n\t} );\n\n\t// Force a reflow to ensure accurate measurements\n\tvoid list.offsetHeight;\n\n\t// Measure all items\n\tconst itemWidths = items.map( ( item ) => {\n\t\tconst width = getElementWidth( item );\n\t\treturn width > 0 ? width : 0;\n\t} );\n\n\t// If we got zero widths, schedule a retry (but don't retry indefinitely)\n\tif ( itemWidths.some( ( width ) => width === 0 ) && scheduleRetry ) {\n\t\tscheduleRetry();\n\t}\n\n\treturn itemWidths;\n}\n\n/**\n * Cache the more button width if not already cached\n * @param {HTMLElement} moreButton    - More button element\n * @param {HTMLElement} moreContainer - More container element\n * @param {number|null} cachedWidth   - Previously cached width (null if not cached)\n * @return {number} Width of more button in pixels\n */\nexport function cacheMoreButtonWidth( moreButton, moreContainer, cachedWidth ) {\n\tif ( cachedWidth !== null ) {\n\t\treturn cachedWidth;\n\t}\n\n\t// Temporarily show more button to measure it\n\tconst wasHidden = moreContainer.style.display === 'none';\n\tif ( wasHidden ) {\n\t\tmoreContainer.style.display = '';\n\t}\n\n\t// Force a reflow for accurate measurement\n\tvoid moreButton.offsetHeight;\n\tconst width = getElementWidth( moreButton );\n\n\t// Restore previous state\n\tif ( wasHidden ) {\n\t\tmoreContainer.style.display = 'none';\n\t}\n\n\treturn width;\n}\n\n/**\n * Get gap value from list or nav styles\n * @param {HTMLElement} list - Navigation list container\n * @param {HTMLElement} nav  - Navigation element\n * @return {number} Gap in pixels\n */\nexport function getGap( list, nav ) {\n\tconst listStyles = window.getComputedStyle( list );\n\tconst navStyles = window.getComputedStyle( nav );\n\treturn (\n\t\tparseFloat( listStyles.gap ) ||\n\t\tparseFloat( navStyles.gap ) ||\n\t\tDEFAULT_GAP\n\t);\n}\n","import PriorityNav from './core/PriorityNav.js';\nimport './styles/style.scss';\n\n// Initialize on DOM ready\ndocument.addEventListener( 'DOMContentLoaded', () => {\n\tconst navElements = document.querySelectorAll(\n\t\t'.wp-block-navigation.is-style-priority-nav'\n\t);\n\n\tnavElements.forEach( ( element ) => new PriorityNav( element ) );\n} );\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * Constants for PriorityNav\n */\nexport const DEFAULT_MORE_LABEL = 'Browse';\nexport const DEFAULT_MORE_ICON = 'none';\nexport const DEFAULT_GAP = 8;\nexport const RETRY_INTERVAL = 100;\nexport const MAX_RETRY_ATTEMPTS = 20;\n","/**\n * DOM utility functions for PriorityNav\n */\n\n/**\n * Check if an element is visible and has dimensions\n * @param {HTMLElement} element - Element to check\n * @return {boolean} True if element is visible\n */\nexport function isElementVisible( element ) {\n\tif ( ! element ) {\n\t\treturn false;\n\t}\n\n\tconst styles = window.getComputedStyle( element );\n\tconst rect = element.getBoundingClientRect();\n\n\treturn (\n\t\tstyles.display !== 'none' &&\n\t\tstyles.visibility !== 'hidden' &&\n\t\trect.width > 0 &&\n\t\trect.height > 0\n\t);\n}\n\n/**\n * Get the visible width of an element\n * @param {HTMLElement} element - Element to measure\n * @return {number} Width in pixels, or 0 if not visible\n */\nexport function getElementWidth( element ) {\n\tif ( ! isElementVisible( element ) ) {\n\t\treturn 0;\n\t}\n\treturn element.getBoundingClientRect().width;\n}\n\n/**\n * Check if the navigation list is measurable (visible and has dimensions)\n * @param {HTMLElement} list - List element to check\n * @return {boolean} True if measurable\n */\nexport function isMeasurable( list ) {\n\treturn isElementVisible( list );\n}\n\n/**\n * Check if navigation is in hamburger/responsive mode\n * Returns true if the menu container is hidden or in responsive overlay mode\n * @param {HTMLElement} responsiveContainer - Responsive container element\n * @param {HTMLElement} list                - Navigation list container\n * @return {boolean} True if in hamburger mode\n */\nexport function isInHamburgerMode( responsiveContainer, list ) {\n\t// Check if responsive container exists and is hidden\n\tif (\n\t\tresponsiveContainer &&\n\t\t( ! isElementVisible( responsiveContainer ) ||\n\t\t\tresponsiveContainer.getAttribute( 'aria-hidden' ) === 'true' )\n\t) {\n\t\treturn true;\n\t}\n\n\t// Check if the main list container is hidden (fallback detection)\n\tif ( list && ! isElementVisible( list ) ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n","/* global Node */\n\n/**\n * HTML utility functions for PriorityNav\n */\n\n/**\n * Escape HTML to prevent XSS\n * @param {string} text - Text to escape\n * @return {string} Escaped HTML\n */\nexport function escapeHtml( text ) {\n\tconst div = document.createElement( 'div' );\n\tdiv.textContent = text;\n\treturn div.innerHTML;\n}\n\n/**\n * Extract text content from a link element\n * @param {HTMLElement} linkElement - Link element to extract text from\n * @return {string} Extracted text\n */\nexport function extractLinkText( linkElement ) {\n\tif ( ! linkElement ) {\n\t\treturn '';\n\t}\n\n\t// Get the label element if it exists (WordPress navigation uses this)\n\tconst label = linkElement.querySelector(\n\t\t'.wp-block-navigation-item__label'\n\t);\n\tif ( label ) {\n\t\treturn label.textContent.trim();\n\t}\n\n\t// No label - extract only direct text nodes, not from nested elements\n\t// Clone link and remove all child elements to get only text\n\tconst linkClone = linkElement.cloneNode( true );\n\tconst allChildren = linkClone.querySelectorAll( '*' );\n\tallChildren.forEach( ( child ) => child.remove() );\n\tlet text = linkClone.textContent.trim();\n\n\t// If that didn't work, try getting first text node only\n\tif ( ! text ) {\n\t\tconst textNodes = Array.from( linkElement.childNodes ).filter(\n\t\t\t( node ) => node.nodeType === Node.TEXT_NODE\n\t\t);\n\t\tif ( textNodes.length > 0 ) {\n\t\t\ttext = textNodes\n\t\t\t\t.map( ( node ) => node.textContent.trim() )\n\t\t\t\t.filter( ( t ) => t )\n\t\t\t\t.join( ' ' );\n\t\t}\n\t}\n\n\treturn text;\n}\n\n/**\n * Remove child text from parent text to avoid contamination\n * @param {string}      parentText       - Parent item text\n * @param {HTMLElement} submenuContainer - Submenu container element\n * @return {string} Cleaned parent text\n */\nexport function removeChildTextFromParent( parentText, submenuContainer ) {\n\tif ( ! parentText || ! submenuContainer ) {\n\t\treturn parentText;\n\t}\n\n\tconst childTexts = [];\n\tsubmenuContainer.querySelectorAll( 'li a' ).forEach( ( childLink ) => {\n\t\tconst childText = childLink.textContent.trim();\n\t\tif ( childText && parentText.includes( childText ) ) {\n\t\t\tchildTexts.push( childText );\n\t\t}\n\t} );\n\n\t// Remove child texts from parent text if they're found\n\tif ( childTexts.length > 0 ) {\n\t\tlet cleanedText = parentText;\n\t\tchildTexts.forEach( ( childText ) => {\n\t\t\tcleanedText = cleanedText.replace( childText, '' ).trim();\n\t\t} );\n\t\treturn cleanedText;\n\t}\n\n\treturn parentText;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Check if module exists (development only)\n\tif (__webpack_modules__[moduleId] === undefined) {\n\t\tvar e = new Error(\"Cannot find module '\" + moduleId + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"priority-plus-nav\": 0,\n\t\"./style-priority-plus-nav\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkpriority_plus_nav\"] = globalThis[\"webpackChunkpriority_plus_nav\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"./style-priority-plus-nav\"], () => (__webpack_require__(\"./src/priority-plus-nav.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["DEFAULT_MORE_LABEL","DEFAULT_MORE_ICON","isMeasurable","isInHamburgerMode","setupEventListeners","createMoreButton","buildDropdownFromOverflow","toggleAccordionItem","closeAllAccordions","hasValidWidthCache","cacheItemWidths","cacheMoreButtonWidth","getGap","PriorityNav","instanceCounter","constructor","element","dataset","priorityNavInitialized","instanceId","classList","contains","nav","list","querySelector","moreLabel","getAttribute","moreIcon","openSubmenusOnClick","detectOpenSubmenusOnClick","moreContainer","moreButton","dropdown","items","Array","from","children","itemWidths","isOpen","isCalculating","openAccordions","submenuCounter","value","responsiveContainer","mutationObserver","retryTimeout","isEnabled","moreButtonWidth","eventHandlers","init","dataAttr","attributes","i","length","attr","name","toLowerCase","includes","firstItem","document","body","toggleDropdown","closeDropdown","button","submenu","setupResponsiveObserver","disablePriorityNav","enablePriorityNav","ResizeObserver","resizeObserver","wasEnabled","inHamburger","requestAnimationFrame","checkOverflow","observe","isArray","forEach","item","style","display","scheduleRetry","needsRecache","some","width","maxAttempts","clearTimeout","attempts","tryEnable","setTimeout","MutationObserver","mutations","shouldCheck","mutation","type","attributeName","attributeFilter","attributeOldValue","availableWidth","calculateAvailableWidth","gap","visibleCount","calculateVisibleItems","offsetHeight","navRect","getBoundingClientRect","navStyles","window","getComputedStyle","padding","parseFloat","paddingLeft","paddingRight","containerWidth","totalWidth","itemWidth","gapWidth","usedWidth","moreButtonGap","itemTotalWidth","wouldFit","openDropdown","add","setAttribute","remove","destroy","disconnect","moreButtonClickHandler","documentClickHandler","documentKeydownHandler","dropdownClickHandler","removeEventListener","escapeHtml","extractNavItemData","createElement","className","iconMap","chevron","plus","menu","iconHTML","innerHTML","appendChild","parentNode","buildAccordionHTML","data","level","submenuId","html","hasSubmenu","text","url","child","itemData","accordionHTML","container","extractLinkText","removeChildTextFromParent","submenuContainer","linkElement","clone","cloneNode","cloneSubmenu","textContent","trim","childItems","querySelectorAll","childItem","push","instance","isExpanded","setProperty","filter","nestedAccordions","nestedButton","nestedSubmenuId","nestedSubmenu","elements","callbacks","e","preventDefault","stopPropagation","addEventListener","target","key","toggle","closest","DEFAULT_GAP","getElementWidth","itemsLength","map","cachedWidth","wasHidden","listStyles","navElements","RETRY_INTERVAL","MAX_RETRY_ATTEMPTS","isElementVisible","styles","rect","visibility","height","div","label","linkClone","allChildren","textNodes","childNodes","node","nodeType","Node","TEXT_NODE","t","join","parentText","childTexts","childLink","childText","cleanedText","replace"],"ignoreList":[],"sourceRoot":""}